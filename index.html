<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HLT35021 DAPA Assessment Timetable</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght100..900&display=swap" rel="stylesheet">
    <style>
        /* Define DAPA Color Palette */
        :root {
            --dapa-primary: #532A8C; 
            --dapa-secondary: #C3ACE8; 
            --dapa-background: #F2F2F2; 
            --dapa-accent-hover: #9D8ABB; 
        }
        .bg-dapa-primary { background-color: var(--dapa-primary); }
        .text-dapa-primary { color: var(--dapa-primary); }
        .bg-dapa-secondary { background-color: var(--dapa-secondary); }
        .text-dapa-secondary { color: var(--dapa-secondary); }
        .bg-dapa-background { background-color: var(--dapa-background); }
        .hover\:bg-dapa-accent-hover:hover { background-color: var(--dapa-accent-hover); }
        .border-dapa-primary { border-color: var(--dapa-primary); }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dapa-background);
        }

        /* --- PRINT STYLES --- */
        @media print {
            @page {
                size: A4 landscape;
                margin: 10mm;
            }
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { 
                background-color: white !important; 
                margin: 0; 
                padding: 0; 
            }
            .max-w-6xl {
                max-width: none !important;
                width: 100% !important;
                box-shadow: none !important;
                margin: 0 !important;
                padding: 0 !important;
                border: none !important;
            }
            .timetable-container { 
                overflow: visible !important; 
                max-height: none !important;
                border: none !important;
            }
            table { 
                border-collapse: collapse !important; 
                width: 100% !important;
                table-layout: auto !important;
            }
            /* Repeat Headers on Each Page */
            thead {
                display: table-header-group !important;
            }
            tr {
                page-break-inside: avoid !important;
            }
            th, td { 
                border: 1px solid #ccc !important;
                padding: 8px !important;
                word-wrap: break-word;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            thead th {
                background-color: #532A8C !important;
                color: white !important;
            }
            .unit-header-row {
                background-color: #f3f4f6 !important;
            }
        }

        .print-only { display: none; }
        .timetable-container { 
            max-height: 70vh; 
            overflow-y: auto; 
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto bg-white rounded-xl shadow-2xl p-6 md:p-10">
        
        <header class="text-center mb-8 pb-4 border-b-2 border-dapa-primary">
            <img 
                src="dapa-logo.png" 
                alt="DAPA Logo" 
                class="mx-auto h-20 mb-4 object-contain" 
                onerror="this.onerror=null; this.src='https://placehold.co/150x80/532A8C/ffffff?text=DAPA+Logo';" 
            />
            <h1 class="no-print text-3xl md:text-4xl font-extrabold text-dapa-primary">
                HLT35021 DAPA Assessment Submission Timetable
            </h1>
            <h1 class="print-only text-2xl md:text-3xl font-extrabold text-dapa-primary">
                Timetable for completion of written assessments for HLT35021 CERTIFICATE III IN DENTAL ASSISTING
            </h1>
        </header>

        <div id="message-box" class="fixed top-4 right-4 z-50 max-w-sm"></div>

        <div class="print-only mb-8 p-6 border-2 rounded-lg border-dapa-primary">
            <h2 class="text-xl font-bold text-dapa-primary mb-6 text-center">Student Timetable Summary</h2>
            <div class="grid grid-cols-3 gap-8 text-center">
                <div>
                    <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">TPP End Date</p>
                    <p id="display-end-date-print" class="text-xl font-extrabold text-dapa-primary mt-2">N/A</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">Calculated Start Date</p>
                    <p id="display-start-date-print" class="text-xl font-extrabold text-dapa-primary mt-2">N/A</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">Remaining Time</p>
                    <p id="display-duration-print" class="text-xl font-extrabold text-dapa-primary mt-2">N/A</p>
                </div>
            </div>
        </div>

        <form id="timetable-controls-form" class="no-print grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 p-4 bg-dapa-background rounded-lg shadow-inner">
            <div class="col-span-1">
                <label for="student-name" class="block text-sm font-medium text-gray-700">Student Name</label>
                <input type="text" id="student-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dapa-primary focus:ring focus:ring-dapa-primary focus:ring-opacity-50 p-2 border" placeholder="e.g., Jane Doe">
            </div>
            <div class="col-span-1">
                <label for="student-number" class="block text-sm font-medium text-gray-700">Student Number</label>
                <input type="text" id="student-number" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dapa-primary focus:ring focus:ring-dapa-primary focus:ring-opacity-50 p-2 border" placeholder="e.g., DAPA-12345">
            </div>
            <div class="col-span-1">
                <label for="course-end-date" class="block text-sm font-medium text-gray-700">TPP End Date</label>
                <input type="date" id="course-end-date" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-dapa-primary focus:ring focus:ring-dapa-primary focus:ring-opacity-50 p-2 border">
            </div>
            <div id="data-load-status" class="col-span-1 md:col-span-3 text-center text-sm font-medium text-gray-500 py-1
